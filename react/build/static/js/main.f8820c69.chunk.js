(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(32),c=n.n(s),o=(n(41),n(42),n(7)),i=n(3),u=Object(r.createContext)(null),l=n(14),j=n(36),p=n(1);function d(){return Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)("span",{className:"pulse"})})}var h=["component"];function b(e){var t=Object(r.useContext)(u),n=t.user,a=t.isLoading;console.log(n,a);var s=e.component,c=Object(j.a)(e,h);return a?Object(p.jsx)(d,{}):n?Object(p.jsx)(i.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return Object(p.jsx)(s,Object(l.a)({},e))}})):Object(p.jsx)(i.a,{to:"/login"})}var m=n(2),f=n.n(m),O=n(6);function x(e){var t=e.fail;return Object(p.jsx)("input",{type:e.type,className:"input ".concat(t?"input--fail":null," "),placeholder:e.placeholder,name:e.name,value:e.value,onChange:e.handleChange,onKeyDown:e.handleKeyDown})}function g(e){return Object(p.jsx)("button",{className:"btn btn--CTA",type:e.type,onSubmit:e.handleSubmit,children:Object(p.jsx)("h4",{children:e.name})})}function v(e){return Object(p.jsx)("h5",{className:"prompt",children:e.prompt})}var w=n(8);var C=n(23);function y(e){var t=e.fail,n=function(e){var t=Object(r.useState)(e),n=Object(w.a)(t,2),a=n[0],s=n[1];return{newState:a,handleToggle:function(){s(!a),console.log(a)}}}(!1),a=n.newState,s=n.handleToggle;return Object(p.jsxs)("div",{className:"flex column padBottomThree",children:[Object(p.jsxs)("div",{className:"input__pass",children:[Object(p.jsx)("input",{type:a?"text":"password",className:"input ".concat(t?"input--fail":null," "),placeholder:e.placeholder,name:e.name,value:e.value,onChange:e.handleChange,onKeyDown:e.handleKeyDown}),Object(p.jsx)("span",{className:"showPasswordButton",onClick:s,children:a?Object(p.jsx)(C.b,{className:"icon"}):Object(p.jsx)(C.a,{className:"icon"})})]}),Object(p.jsx)("input",{type:a?"text":"password",className:"input ".concat(t?"input--fail":null," "),placeholder:e.placeholderConfirm,name:e.nameConfirm,value:e.valueConfirm,onChange:e.handleChange,onKeyDown:e.handleKeyDown})]})}function N(e){return Object(p.jsx)("div",{className:"notifError",children:Object(p.jsx)("h5",{children:e.error})})}var k=n(4);function S(e){var t=e.initialValues,n=Object(r.useState)(t||{}),a=Object(w.a)(n,2),s=a[0],c=a[1];return{handleChange:function(e){var t=e.target.value,n=e.target.name;c(Object(l.a)(Object(l.a)({},s),{},Object(k.a)({},n,t)))},values:s}}var U=n(13),D=n.n(U);function _(){var e=Object(i.g)(),t=Object(r.useContext)(u).setUser,n=Object(r.useState)(null),a=Object(w.a)(n,2),s=a[0],c=a[1],o=function(){var n=Object(O.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.get("/user").then((function(n){t(n.data.currentUser),e.push("/home")})).catch((function(e){c(e.response.data)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,r,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.username,r=t.email,a=t.password,s=t.passwordConfirm,e.abrupt("return",D.a.post("auth/register",{username:n,email:r,password:a,passwordConfirm:s}).then(Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){return c(e.response.data)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.abrupt("return",D.a.post("auth/login",{username:n,password:r}).then(Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){c(e.response.data)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{registerUser:l,loginUser:j,error:s}}function F(){var e=S({initialValues:{email:"",username:"",password:"",passwordConfirm:""}}),t=e.values,n=e.handleChange,r=_(),a=r.registerUser,s=r.error,c=function(){var e=Object(O.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"page",style:{justifyContent:"center"},children:Object(p.jsxs)("div",{className:"inlineForm",children:[Object(p.jsx)("h3",{children:"Register"}),Object(p.jsx)("div",{className:"inlineForm__notif",children:s&&Object(p.jsx)(N,{error:s.messages})}),Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsx)(x,{type:"text",placeholder:"Email",name:"email",value:t.email,handleChange:n}),Object(p.jsx)(x,{type:"text",placeholder:"Username",name:"username",value:t.username,handleChange:n}),Object(p.jsx)(y,{type:"password",placeholder:"Password",placeholderConfirm:"Confirm password",name:"password",nameConfirm:"passwordConfirm",value:t.password,valueConfirm:t.passwordConfirm,handleChange:n}),Object(p.jsxs)("div",{className:"inlineForm__submit",children:[Object(p.jsx)(o.b,{to:"/login",children:Object(p.jsx)(v,{prompt:"Existing account? Log in."})}),Object(p.jsx)(g,{name:"register",type:"submit"})]})]})]})})}function L(){var e=S({initialValues:{username:"",password:""}}),t=e.values,n=e.handleChange,r=_(),a=r.loginUser,s=r.error,c=function(){var e=Object(O.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"page",style:{justifyContent:"center"},children:Object(p.jsxs)("div",{className:"inlineForm",children:[Object(p.jsx)("h3",{children:"Login"}),Object(p.jsx)("div",{className:"inlineForm__notif",children:s&&Object(p.jsx)(N,{error:s.messages})}),Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsx)(x,{type:"text",placeholder:"Username",name:"username",value:t.username,handleChange:n}),Object(p.jsx)(x,{type:"password",placeholder:"Password",name:"password",value:t.password,handleChange:n}),Object(p.jsxs)("div",{className:"inlineForm__submit",children:[Object(p.jsx)(o.b,{to:"/register",children:Object(p.jsx)(v,{prompt:"Register"})}),Object(p.jsx)(g,{name:"login",type:"submit"})]})]})]})})}function E(e){return Object(p.jsx)("h4",{className:"inlineBtn",type:e.type,onClick:e.handleClick,children:e.name})}function K(){var e=Object(r.useContext)(u).user,t=function(){var e=Object(i.g)(),t=function(){var t=Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D()({method:"GET",url:"auth/logout"}).then((function(t){console.log(t),e.push("/")}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();return{logoutUser:t}}(),n=t.logoutUser;return Object(p.jsx)("header",{children:e?Object(p.jsxs)(p.Fragment,{children:["Logged In as: ",e.username,Object(p.jsx)(E,{name:"logout",handleClick:n})]}):Object(p.jsxs)("div",{className:"btnGroup",children:[Object(p.jsx)(o.b,{to:"/login",children:Object(p.jsx)(E,{name:"login"})}),Object(p.jsx)(o.b,{to:"/register",children:Object(p.jsx)(E,{name:"register"})})]})})}function T(){return Object(r.useContext)(u).user&&i.a,Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)(K,{}),Object(p.jsx)("h3",{children:"Please Login to see the graph"})]})}var A=n(35);var G={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],datasets:[{label:"Income",data:[12,19,3,5,2,3,2,3,20,5,1,4],backgroundColor:"rgb(255, 99, 132)",stack:"Stack 0"},{label:"Expenses",data:[2,3,20,5,1,4,12,19,3,5,2,3],backgroundColor:"rgb(54, 162, 235)",stack:"Stack 0"}]},J={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};function P(){var e=function(){var e=Object(r.useState)(null),t=Object(w.a)(e,2),n=t[0],a=t[1],s=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/graph").then((function(e){return e.data.graphData})).catch((function(e){a(e.response.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{getGraphData:s,error:n}}();e.getGraphData;return Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)(K,{}),Object(p.jsxs)("h3",{className:"page__body",children:["Graph Shows here",G]}),Object(p.jsx)(A.a,{data:G,options:J})]})}function B(){return Object(p.jsx)("div",{children:"You seem lost."})}var I=function(){var e=function(){var e=Object(r.useState)(null),t=Object(w.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!0),c=Object(w.a)(s,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/user").then((function(e){a(e.data.currentUser),i(!1)})).catch((function(e){i(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{user:n,setUser:a,isLoading:o}}(),t=e.user,n=e.setUser,a=e.isLoading;return Object(p.jsx)(o.a,{children:Object(p.jsx)(u.Provider,{value:{user:t,setUser:n,isLoading:a},children:Object(p.jsxs)(i.d,{children:[Object(p.jsx)(i.b,{exact:!0,path:"/",component:T}),Object(p.jsx)(i.b,{path:"/register",component:F}),Object(p.jsx)(i.b,{path:"/login",component:L}),Object(p.jsx)(b,{path:"/home",component:P}),Object(p.jsx)(i.b,{component:B})]})})})};D.a.defaults.headers.post["Content-Type"]="application/json",c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(I,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.f8820c69.chunk.js.map